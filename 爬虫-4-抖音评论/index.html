<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>爬虫：4.抖音评论 | 斯达的编程宝典</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="./favicon.ico">
    <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?2675818a983a3131404cee835018f016";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
      </script>
    <meta name="description" content="贴心的编程学习路线，全面的编程知识百科">
    <meta name="keywords" content="程序员斯达, 编程学习路线, 编程知识百科, Java, 编程导航, 前端, 开发, 编程分享, 项目, IT, 求职, 面经">
    
    <link rel="preload" href="./assets/css/0.styles.96b8cfb3.css" as="style"><link rel="preload" href="./assets/js/app.5249bd7e.js" as="script"><link rel="preload" href="./assets/js/2.c0aaeb5f.js" as="script"><link rel="preload" href="./assets/js/36.8fa9da21.js" as="script"><link rel="prefetch" href="./assets/js/1.c6f1e4ad.js"><link rel="prefetch" href="./assets/js/10.ff7da4ea.js"><link rel="prefetch" href="./assets/js/11.2a86f324.js"><link rel="prefetch" href="./assets/js/12.b2a22df0.js"><link rel="prefetch" href="./assets/js/13.2fb622db.js"><link rel="prefetch" href="./assets/js/14.9de06b8b.js"><link rel="prefetch" href="./assets/js/15.fd8ff8b5.js"><link rel="prefetch" href="./assets/js/16.6a8e242d.js"><link rel="prefetch" href="./assets/js/17.5d138c5f.js"><link rel="prefetch" href="./assets/js/18.69625345.js"><link rel="prefetch" href="./assets/js/19.5f3420fe.js"><link rel="prefetch" href="./assets/js/20.4feae0ab.js"><link rel="prefetch" href="./assets/js/21.f49fcd71.js"><link rel="prefetch" href="./assets/js/22.b5a7d7d5.js"><link rel="prefetch" href="./assets/js/23.ebe0b8ee.js"><link rel="prefetch" href="./assets/js/24.be88a529.js"><link rel="prefetch" href="./assets/js/25.174226b7.js"><link rel="prefetch" href="./assets/js/26.f147598c.js"><link rel="prefetch" href="./assets/js/27.78be6249.js"><link rel="prefetch" href="./assets/js/28.21114511.js"><link rel="prefetch" href="./assets/js/29.844f1698.js"><link rel="prefetch" href="./assets/js/3.c54f0213.js"><link rel="prefetch" href="./assets/js/30.5c66521b.js"><link rel="prefetch" href="./assets/js/31.4a56eed6.js"><link rel="prefetch" href="./assets/js/32.3cf208d8.js"><link rel="prefetch" href="./assets/js/33.e99f4a5a.js"><link rel="prefetch" href="./assets/js/34.2ae9e400.js"><link rel="prefetch" href="./assets/js/35.daa5630d.js"><link rel="prefetch" href="./assets/js/37.fdd9a70b.js"><link rel="prefetch" href="./assets/js/38.39220aed.js"><link rel="prefetch" href="./assets/js/4.a710e4e6.js"><link rel="prefetch" href="./assets/js/5.310736f9.js"><link rel="prefetch" href="./assets/js/6.a1367672.js"><link rel="prefetch" href="./assets/js/7.d4d686a3.js"><link rel="prefetch" href="./assets/js/vendors~docsearch.b873aa2e.js">
    <link rel="stylesheet" href="./assets/css/0.styles.96b8cfb3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/./" class="home-link router-link-active"><img src="./logo.png" alt="斯达的编程宝典" class="logo"> <span class="site-name can-hide">斯达的编程宝典</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/./代码实战/" class="nav-link">
  代码实战
</a></div> <a href="https://github.com/SeirinStar11/CodeWeb" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/./代码实战/" class="nav-link">
  代码实战
</a></div> <a href="https://github.com/SeirinStar11/CodeWeb" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/./%E4%BB%A3%E7%A0%81%E5%AE%9E%E6%88%98/" class="sidebar-link">免费学习路线</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>代码实战-python</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>代码实战-c语言</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>代码实战-爬虫项目</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/./%E7%88%AC%E8%99%AB-1-%E6%90%BA%E7%A8%8Bselenium/" class="sidebar-link">爬虫：1.携程selenium</a></li><li><a href="/./%E7%88%AC%E8%99%AB-2-bilibili%E5%BC%B9%E5%B9%95%E8%AF%84%E8%AE%BA/" class="sidebar-link">爬虫：2.bilibili弹幕评论</a></li><li><a href="/./%E7%88%AC%E8%99%AB-3-%E6%B7%98%E5%AE%9D%E5%95%86%E5%93%81%E6%90%9C%E7%B4%A2/" class="sidebar-link">爬虫：3.淘宝商品搜索</a></li><li><a href="/./%E7%88%AC%E8%99%AB-4-%E6%8A%96%E9%9F%B3%E8%AF%84%E8%AE%BA/" aria-current="page" class="active sidebar-link">爬虫：4.抖音评论</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/./%E7%88%AC%E8%99%AB-5-%E5%B0%8F%E7%BA%A2%E4%B9%A6%E8%AF%84%E8%AE%BA/" class="sidebar-link">爬虫：5.小红书评论</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="content"><div style="width:100%"><div class="theme-default-content custom-content content__default"><h3 id="爬虫-4-抖音评论"><a href="#爬虫-4-抖音评论" class="header-anchor">#</a> 爬虫：4.抖音评论</h3> <h3 id="一、评论获取-接口-无需破解"><a href="#一、评论获取-接口-无需破解" class="header-anchor">#</a> 一、评论获取（接口，无需破解）</h3> <p>接口：<a href="">https://www.douyin.com/aweme/v1/web/comment/list/?device_platform=</a></p> <blockquote><p>1.获取响应函数,其中cursor是每页的独有参数，由前一页的响应信息得到（第一页的cursor=0）</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">get_comment</span><span class="token punctuation">(</span>cursor<span class="token punctuation">)</span><span class="token punctuation">:</span>
    response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>
        <span class="token string">'https://www.douyin.com/aweme/v1/web/comment/list/?device_platform=webapp&amp;aid=6383&amp;channel=channel_pc_web&amp;aweme_id=7307957787894582547&amp;cursor'</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>cursor<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'&amp;count=20&amp;item_type=0&amp;insert_ids=&amp;whale_cut_token=&amp;cut_version=1&amp;rcFT=&amp;pc_client_type=1&amp;version_code=170400&amp;version_name=17.4.0&amp;cookie_enabled=true&amp;screen_width=1920&amp;screen_height=1080&amp;browser_language=zh-CN&amp;browser_platform=Win32&amp;browser_name=Edge&amp;browser_version=121.0.0.0&amp;browser_online=true&amp;engine_name=Blink&amp;engine_version=121.0.0.0&amp;os_name=Windows&amp;os_version=10&amp;cpu_core_num=6&amp;device_memory=8&amp;platform=PC&amp;downlink=8.8&amp;effective_type=4g&amp;round_trip_time=100&amp;webid=7332751467407672871&amp;msToken=MeiW7tAMpLsb4B3B1HrvCi80TDsCCWsK7w8hjYGhZkIlBjh94zswE7Us0wEjFZvQMtCXj4ByFb5dscYWcHgEG44t-8hyhPeN2wiBoIXmRnECQK3sJZawslaiu5Y=&amp;X-Bogus=DFSzswVuyGsANr5Ktqlr7rUdyoBK'</span><span class="token punctuation">,</span>
        headers<span class="token operator">=</span>headers<span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">return</span> response
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>2.复制curl（bash)获取url(cursor留出来)</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>url <span class="token operator">=</span> <span class="token string">'https://www.douyin.com/aweme/v1/web/comment/list/?device_platform=webapp&amp;aid=6383&amp;channel=channel_pc_web&amp;aweme_id=7307957787894582547&amp;cursor'</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>cursor<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'&amp;count=20&amp;item_type=0&amp;insert_ids=&amp;whale_cut_token=&amp;cut_version=1&amp;rcFT=&amp;pc_client_type=1&amp;version_code=170400&amp;version_name=17.4.0&amp;cookie_enabled=true&amp;screen_width=1920&amp;screen_height=1080&amp;browser_language=zh-CN&amp;browser_platform=Win32&amp;browser_name=Edge&amp;browser_version=121.0.0.0&amp;browser_online=true&amp;engine_name=Blink&amp;engine_version=121.0.0.0&amp;os_name=Windows&amp;os_version=10&amp;cpu_core_num=6&amp;device_memory=8&amp;platform=PC&amp;downlink=8.8&amp;effective_type=4g&amp;round_trip_time=100&amp;webid=7332751467407672871&amp;msToken=MeiW7tAMpLsb4B3B1HrvCi80TDsCCWsK7w8hjYGhZkIlBjh94zswE7Us0wEjFZvQMtCXj4ByFb5dscYWcHgEG44t-8hyhPeN2wiBoIXmRnECQK3sJZawslaiu5Y=&amp;X-Bogus=DFSzswVuyGsANr5Ktqlr7rUdyoBK'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>3.分页爬取评论信息</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> requests

headers <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'authority'</span><span class="token punctuation">:</span> <span class="token string">'www.douyin.com'</span><span class="token punctuation">,</span>
    <span class="token string">'accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json, text/plain, */*'</span><span class="token punctuation">,</span>
    <span class="token string">'accept-language'</span><span class="token punctuation">:</span> <span class="token string">'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6'</span><span class="token punctuation">,</span>
    <span class="token string">'cookie'</span><span class="token punctuation">:</span> <span class="token string">'ttwid=1%7Co3rSwJ06VxyGLrjT0cP5lSvyjiodABbcNhF-rJkT6vo%7C1707289260%7Cfa8880cbba95d6cd0245eae88ed5c9454b8ec2c79adda7eeedab6944f5fc9734; douyin.com; device_web_cpu_core=6; device_web_memory_size=8; architecture=amd64; dy_swidth=1920; dy_sheight=1080; csrf_session_id=025bbe80d3bb55fdd38af4fe66349ede; strategyABtestKey=%221707289263.264%22; FORCE_LOGIN=%7B%22videoConsumedRemainSeconds%22%3A180%2C%22isForcePopClose%22%3A1%7D; passport_csrf_token=ac824a617300caf8f7016d934bbed172; passport_csrf_token_default=ac824a617300caf8f7016d934bbed172; bd_ticket_guard_client_web_domain=2; ttcid=29486722eed34e5fa838ab965ae3c19c32; s_v_web_id=verify_lsbg0qye_gDGtjLN9_7vR3_4SmT_9VUL_FG1xyNw74U8V; d_ticket=9acbbdcc61ad15144ffbafa6bc3f82dcf402c; passport_assist_user=CkGJo8SZxoGj9lUVSlaje6Jp5BpjLUvWUZfURX02jYsu0VRVDshPpBz7_GIauwIeIVw0W1aMpqGPhmRZKJlsOJQgFRpKCjxrZrFwNVB2-RkQuBIt3rDijKupav0QjC5kCpBZ2yMMctZ-_SKWU8yreb3BssvAvP1T3gdf9sOkF4HP0e8Q9d3IDRiJr9ZUIAEiAQP02Vj0; n_mh=we4sdJUEQEJR2yFJVWSKhZ2TUDg4P82QmFtCQsF_ze0; sso_uid_tt=dcc9892e1bec773fd65c5b182608fc85; sso_uid_tt_ss=dcc9892e1bec773fd65c5b182608fc85; toutiao_sso_user=4ae9b71e0b773b30b3d75436057e6aa0; toutiao_sso_user_ss=4ae9b71e0b773b30b3d75436057e6aa0; sid_ucp_sso_v1=1.0.0-KDc4MmNiNTUwODA3NThkZTBiYzAyM2Q5NjYzMmY3YzU0Yjk3MDM2MjYKHwjf5oCi2szgBRC-1oyuBhjvMSAMMIqJ6aIGOAZA9AcaAmxmIiA0YWU5YjcxZTBiNzczYjMwYjNkNzU0MzYwNTdlNmFhMA; ssid_ucp_sso_v1=1.0.0-KDc4MmNiNTUwODA3NThkZTBiYzAyM2Q5NjYzMmY3YzU0Yjk3MDM2MjYKHwjf5oCi2szgBRC-1oyuBhjvMSAMMIqJ6aIGOAZA9AcaAmxmIiA0YWU5YjcxZTBiNzczYjMwYjNkNzU0MzYwNTdlNmFhMA; passport_auth_status=77c619f11621f8dc560418a775cfb774%2C; passport_auth_status_ss=77c619f11621f8dc560418a775cfb774%2C; uid_tt=9ba2a2b739b860483f7a5911be7266f6; uid_tt_ss=9ba2a2b739b860483f7a5911be7266f6; sid_tt=0fa533138253d6383f25fbbaa521d13c; sessionid=0fa533138253d6383f25fbbaa521d13c; sessionid_ss=0fa533138253d6383f25fbbaa521d13c; publish_badge_show_info=%220%2C0%2C0%2C1707289416385%22; LOGIN_STATUS=1; store-region=cn-cq; store-region-src=uid; _bd_ticket_crypt_doamin=2; _bd_ticket_crypt_cookie=22e5e03b58d1fbf0fb4efb4a7b1718a2; __security_server_data_status=1; sid_guard=0fa533138253d6383f25fbbaa521d13c%7C1707289418%7C5183991%7CSun%2C+07-Apr-2024+07%3A03%3A29+GMT; sid_ucp_v1=1.0.0-KGQ0YjM0NjU2MjczYjhhYTY2Y2U1ZDg2MTYzNWQ0ZjEyZWJkM2QwYmYKGwjf5oCi2szgBRDK1oyuBhjvMSAMOAZA9AdIBBoCaGwiIDBmYTUzMzEzODI1M2Q2MzgzZjI1ZmJiYWE1MjFkMTNj; ssid_ucp_v1=1.0.0-KGQ0YjM0NjU2MjczYjhhYTY2Y2U1ZDg2MTYzNWQ0ZjEyZWJkM2QwYmYKGwjf5oCi2szgBRDK1oyuBhjvMSAMOAZA9AdIBBoCaGwiIDBmYTUzMzEzODI1M2Q2MzgzZjI1ZmJiYWE1MjFkMTNj; xg_device_score=7.285386356049827; passport_fe_beating_status=true; stream_recommend_feed_params=%22%7B%5C%22cookie_enabled%5C%22%3Atrue%2C%5C%22screen_width%5C%22%3A1920%2C%5C%22screen_height%5C%22%3A1080%2C%5C%22browser_online%5C%22%3Atrue%2C%5C%22cpu_core_num%5C%22%3A6%2C%5C%22device_memory%5C%22%3A8%2C%5C%22downlink%5C%22%3A10%2C%5C%22effective_type%5C%22%3A%5C%224g%5C%22%2C%5C%22round_trip_time%5C%22%3A0%7D%22; SEARCH_RESULT_LIST_TYPE=%22single%22; stream_player_status_params=%22%7B%5C%22is_auto_play%5C%22%3A0%2C%5C%22is_full_screen%5C%22%3A0%2C%5C%22is_full_webscreen%5C%22%3A0%2C%5C%22is_mute%5C%22%3A1%2C%5C%22is_speed%5C%22%3A1%2C%5C%22is_visible%5C%22%3A0%7D%22; download_guide=%223%2F20240207%2F0%22; FOLLOW_NUMBER_YELLOW_POINT_INFO=%22MS4wLjABAAAAEav5WLu_4I2D47OqWOr-86IrwNCjjBzPY2rsWpBRuLJHw5JfT9BhyNBIzdFtbpTp%2F1707321600000%2F0%2F0%2F1707292273638%22; home_can_add_dy_2_desktop=%221%22; bd_ticket_guard_client_data=eyJiZC10aWNrZXQtZ3VhcmQtdmVyc2lvbiI6MiwiYmQtdGlja2V0LWd1YXJkLWl0ZXJhdGlvbi12ZXJzaW9uIjoxLCJiZC10aWNrZXQtZ3VhcmQtcmVlLXB1YmxpYy1rZXkiOiJCTGZuZDRWNkJIV3JPREIyS0Ewc0hqZ0w2YTEyOEFDWmtGMXpLV0dHNksxRHNJL1UyYldrUjJoNmV2SW83N3FNcWNOOFVIWXdGUE1NNUVrMUE3ZGJ6WTA9IiwiYmQtdGlja2V0LWd1YXJkLXdlYi12ZXJzaW9uIjoxfQ%3D%3D; tt_scid=NlY4jMhB1FXt5SiWAgDe8C-ZUu9chokgU-dtAQ4K1e2TVsvTNXs45CH8eaZMWjLe470e; odin_tt=b626a8aa3477ee65d77680710935719ca909d9669b31089f3ee5312a505a2f58e100f9b492232e59dab7d4ab4382d74d; pwa2=%220%7C0%7C3%7C0%22; IsDouyinActive=true; msToken=mXEuqXu8R56KTshY_Fp4q-0L5PVCSDfWnt38uWw3G4PxWS9-6J3UR4mTs4wr6lBAIbsjpKh1Upr5i2nKrk21meDzah3x-lyc4zxO1c5Qu7pZZpDpNA==; volume_info=%7B%22isUserMute%22%3Afalse%2C%22isMute%22%3Afalse%2C%22volume%22%3A0.064%7D; msToken=MeiW7tAMpLsb4B3B1HrvCi80TDsCCWsK7w8hjYGhZkIlBjh94zswE7Us0wEjFZvQMtCXj4ByFb5dscYWcHgEG44t-8hyhPeN2wiBoIXmRnECQK3sJZawslaiu5Y='</span><span class="token punctuation">,</span>
    <span class="token string">'referer'</span><span class="token punctuation">:</span> <span class="token string">'https://www.douyin.com/search/%E8%BE%9B%E7%94%98%E7%A7%A6%E6%84%BFcp?modal_id=7307957787894582547&amp;publish_time=0&amp;sort_type=1&amp;source=tab_search&amp;type=general'</span><span class="token punctuation">,</span>
    <span class="token string">'sec-ch-ua'</span><span class="token punctuation">:</span> <span class="token string">'&quot;Not A(Brand&quot;;v=&quot;99&quot;, &quot;Microsoft Edge&quot;;v=&quot;121&quot;, &quot;Chromium&quot;;v=&quot;121&quot;'</span><span class="token punctuation">,</span>
    <span class="token string">'sec-ch-ua-mobile'</span><span class="token punctuation">:</span> <span class="token string">'?0'</span><span class="token punctuation">,</span>
    <span class="token string">'sec-ch-ua-platform'</span><span class="token punctuation">:</span> <span class="token string">'&quot;Windows&quot;'</span><span class="token punctuation">,</span>
    <span class="token string">'sec-fetch-dest'</span><span class="token punctuation">:</span> <span class="token string">'empty'</span><span class="token punctuation">,</span>
    <span class="token string">'sec-fetch-mode'</span><span class="token punctuation">:</span> <span class="token string">'cors'</span><span class="token punctuation">,</span>
    <span class="token string">'sec-fetch-site'</span><span class="token punctuation">:</span> <span class="token string">'same-origin'</span><span class="token punctuation">,</span>
    <span class="token string">'user-agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36 Edg/121.0.0.0'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

cursor <span class="token operator">=</span> <span class="token number">0</span>

cid <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
text <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
aweme_id <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
create_time <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
digg_count <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
status <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
uid <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
short_id <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
nickname <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
sec_uid <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
ip_label <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
level <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    
<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    response <span class="token operator">=</span> get_comment<span class="token punctuation">(</span>cursor<span class="token punctuation">)</span><span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>
    cursor <span class="token operator">=</span> cursor<span class="token operator">+</span><span class="token number">20</span>
    comments <span class="token operator">=</span> response<span class="token punctuation">[</span><span class="token string">'comments'</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>comments<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        comment <span class="token operator">=</span> comments<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
        cid<span class="token punctuation">.</span>append<span class="token punctuation">(</span>comment<span class="token punctuation">[</span><span class="token string">'cid'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        text<span class="token punctuation">.</span>append<span class="token punctuation">(</span>comment<span class="token punctuation">[</span><span class="token string">'text'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        aweme_id<span class="token punctuation">.</span>append<span class="token punctuation">(</span>comment<span class="token punctuation">[</span><span class="token string">'aweme_id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        create_time<span class="token punctuation">.</span>append<span class="token punctuation">(</span>comment<span class="token punctuation">[</span><span class="token string">'create_time'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        digg_count<span class="token punctuation">.</span>append<span class="token punctuation">(</span>comment<span class="token punctuation">[</span><span class="token string">'digg_count'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        uid<span class="token punctuation">.</span>append<span class="token punctuation">(</span>comment<span class="token punctuation">[</span><span class="token string">'user'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'uid'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        short_id<span class="token punctuation">.</span>append<span class="token punctuation">(</span>comment<span class="token punctuation">[</span><span class="token string">'user'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'short_id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        nickname<span class="token punctuation">.</span>append<span class="token punctuation">(</span>comment<span class="token punctuation">[</span><span class="token string">'user'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'nickname'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        sec_uid<span class="token punctuation">.</span>append<span class="token punctuation">(</span>comment<span class="token punctuation">[</span><span class="token string">'user'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'sec_uid'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        ip_label<span class="token punctuation">.</span>append<span class="token punctuation">(</span>comment<span class="token punctuation">[</span><span class="token string">'ip_label'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">#     print(cursor)</span>
    hasmore <span class="token operator">=</span> response<span class="token punctuation">[</span><span class="token string">'has_more'</span><span class="token punctuation">]</span>
    <span class="token keyword">if</span> hasmore <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword">break</span>

<span class="token comment"># 保存数据</span>
d <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'create_time'</span><span class="token punctuation">:</span>create_time<span class="token punctuation">,</span>
    <span class="token string">'cid'</span><span class="token punctuation">:</span>cid<span class="token punctuation">,</span>
    <span class="token string">'ip_label'</span><span class="token punctuation">:</span>ip_label<span class="token punctuation">,</span>
    <span class="token string">'text'</span><span class="token punctuation">:</span>text<span class="token punctuation">,</span>
    <span class="token string">'aweme_id'</span><span class="token punctuation">:</span>aweme_id<span class="token punctuation">,</span>
    <span class="token string">'digg_count'</span><span class="token punctuation">:</span>digg_count<span class="token punctuation">,</span>
    <span class="token string">'uid'</span><span class="token punctuation">:</span>uid<span class="token punctuation">,</span>
    <span class="token string">'short_id'</span><span class="token punctuation">:</span>short_id<span class="token punctuation">,</span>
    <span class="token string">'nickname'</span><span class="token punctuation">:</span>nickname<span class="token punctuation">,</span>
    <span class="token string">'sec_uid'</span><span class="token punctuation">:</span>sec_uid<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd 
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>d<span class="token punctuation">)</span>
df<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span>
df<span class="token punctuation">.</span>to_excel<span class="token punctuation">(</span><span class="token string">'抖音评论.xlsx'</span><span class="token punctuation">,</span>index<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br></div></div></blockquote></div> <footer class="page-edit" style="margin:0;"><div class="edit-link"><a href="https://github.com/SeirinStar11/CodeWeb/edit/master/代码实战/爬虫：4.抖音评论.md" target="_blank" rel="noopener noreferrer">完善页面</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <!----></div> <div class="toc-container-sidebar"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="max-height:86vh"><div style="font-weight:bold;">爬虫：4.抖音评论</div> <hr> <div class="toc-box"><!----></div></div></div></div></div>  <main class="footer"> <div class="copy-right"><span class="name"> 编程导航   |     </span> <a target="_blank" rel="noreferrer">
          
        </a></div></main></main> <aside class="page-sidebar"> <div class="page-side-toolbar"></div>  </aside></div><div class="global-ui"></div></div>
    <script src="./assets/js/app.5249bd7e.js" defer></script><script src="./assets/js/2.c0aaeb5f.js" defer></script><script src="./assets/js/36.8fa9da21.js" defer></script>
  </body>
</html>
